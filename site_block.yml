---
#
# Simple Playbook to setup motd on Linux machine
#

- name: Setup motd
  hosts: all
  become: yes
  vars_files:
    - vars/main.yml

  tasks:
    - name: Include Role and Handle Error
      block:
        - name: Include Role
          include_role:
            name: setup_motd

        - name: POST success
          debug:
            msg: "Do HTTP POST with data for Task: {{task_id}} for Success Cases"
      rescue:
        - name: Include handle_job_events
          include_role:
            name: handle_job_events

        - name: POST failure
          debug:
            msg: "Do HTTP POST with data for Task: {{task_id}} for Failure Cases"
